var _cs=window._cs||{};_cs.chatBox="",_cs.chatBox+='<div class="chat-window col-xs-5 col-md-3" id="chat_window_1">',_cs.chatBox+='    <div class="col-xs-12 col-md-12">',_cs.chatBox+='    \t<div class="panel panel-default">',_cs.chatBox+='            <div class="panel-heading top-bar">',_cs.chatBox+='                <div class="col-md-8 col-xs-8">',_cs.chatBox+='                    <span class="glyphicon glyphicon-comment"></span>  <span class="panel-title">Chat Service</span>',_cs.chatBox+="                </div>",_cs.chatBox+='                <div class="col-md-4 col-xs-4" style="text-align: right;">',_cs.chatBox+='                    <a href="#"><span id="minim_chat_window" class="glyphicon glyphicon-minus icon_minim"></span></a>',_cs.chatBox+='                    <a href="#"><span class="glyphicon glyphicon-remove icon_close" data-id="chat_window_1"></span></a>',_cs.chatBox+="                </div>",_cs.chatBox+="            </div>",_cs.chatBox+='            <div class="panel-body msg_container_base">',_cs.chatBox+="                ",_cs.chatBox+="            </div>",_cs.chatBox+='            <div class="panel-footer">',_cs.chatBox+='                <div class="input-group">',_cs.chatBox+='                    <input id="btn-input" type="text" class="form-control input-sm chat_input" placeholder="Write your message here..." />',_cs.chatBox+='                    <span class="input-group-btn">',_cs.chatBox+='                    <button class="btn btn-primary btn-sm" id="btn-chat">Send</button>',_cs.chatBox+="                    </span>",_cs.chatBox+="                </div>",_cs.chatBox+="            </div>",_cs.chatBox+="\t\t</div>",_cs.chatBox+="    </div>",_cs.chatBox+="</div>",_cs.styleCommon='<link rel="stylesheet" href="http://localhost:4200/assets/css/chatbox.css">',_cs.styleBootstrap='<link rel="stylesheet" href="http://localhost:4200/assets/css/bootstrap.min.css">',function(){var a=document.createElement("SCRIPT");a.src="http://localhost:4200/assets/js/require.js",a.type="text/javascript",a.onload=function(){requirejs.config({paths:{jquery:"http://code.jquery.com/jquery",io:"http://localhost:3000/socket.io/socket.io.js"}}),requirejs(["jquery","io"],function(a,b){a("body").append(_cs.styleBootstrap),a("body").append(_cs.styleCommon),a("body").append(_cs.chatBox),a(document).on("click",".panel-heading span.icon_minim",function(b){var c=a(this);c.hasClass("panel-collapsed")?(c.parents(".panel").find(".panel-body").slideDown(),c.removeClass("panel-collapsed"),c.removeClass("glyphicon-plus").addClass("glyphicon-minus")):(c.parents(".panel").find(".panel-body").slideUp(),c.addClass("panel-collapsed"),c.removeClass("glyphicon-minus").addClass("glyphicon-plus"))}),a(document).on("focus",".panel-footer input.chat_input",function(b){var c=a(this);a("#minim_chat_window").hasClass("panel-collapsed")&&(c.parents(".panel").find(".panel-body").slideDown(),a("#minim_chat_window").removeClass("panel-collapsed"),a("#minim_chat_window").removeClass("glyphicon-plus").addClass("glyphicon-minus"))}),a(document).on("click","#new_chat",function(b){var c=a(".chat-window:last-child").css("margin-left");size_total=parseInt(c)+400,alert(size_total),a("#chat_window_1").clone().appendTo(".container").css("margin-left",size_total)}),a(document).on("click",".icon_close",function(b){a("#chat_window_1").remove()}),_cs.ClientID=Math.floor(1e6*Math.random()),_cs.AdminID="587da2551c2cea1274504908",_cs.socket=b("http://localhost:3000/chat_service",{query:"AdminID="+_cs.AdminID+"&ClientID="+_cs.ClientID+"&isClient=true"}),a("#btn-chat").click(function(){var b={timer:_cs.currentTimer(),text:a("#btn-input").val()};_cs.socket.emit("ClientSendMessage"+_cs.ClientID,b,function(b){_cs.appendMessage("send",b),a("#btn-input").val("")})}),_cs.socket.on("ClientReceivedMessage"+_cs.ClientID,function(a){_cs.appendMessage("receive",a)}),_cs.socket.on("AdminStatus"+_cs.AdminID,function(b){a(".panel-title").text(0==b.status?"Offline":"Online"),1==b.status?(_cs.AdminName=b.AdminName,_cs.AdminAvatar=b.AdminAvatar,a(".msg_container_base").html('<div class="row msg_container base_receive"><div class="col-md-2 col-xs-2 avatar"><img src="'+b.AdminAvatar+'" class=" img-responsive "></div><div class="col-md-10 col-xs-10"><div class="messages msg_sent"><p>Hello! I\'m '+b.AdminName+'.Can i help you?</p><time datetime="2009-11-13T20:00">'+_cs.currentTimer()+"</time></div></div></div>")):a(".msg_container_base").html('<div class="row msg_container base_receive"><div class="col-md-12 col-xs-12"><div class="messages msg_sent"><p>Sorry guy!Now, we are offine, please leave a message for us!</p></div></div>')}),_cs.appendMessage=function(b,c){var d="";"send"==b?(d+='<div class="row msg_container base_sent">',d+='<div class="col-md-10 col-xs-10">',d+='<div class="messages msg_sent">',d+="<p>"+c.text+"</p>",d+='<time datetime="2009-11-13T20:00">'+c.timer+"</time>",d+="</div>",d+="</div>",d+='<div class="col-md-2 col-xs-2 avatar">',d+='<img src="http://www.bitrebels.com/wp-content/uploads/2011/02/Original-Facebook-Geek-Profile-Avatar-1.jpg" class=" img-responsive ">',d+="</div>",d+="</div>"):(d+='<div class="row msg_container base_receive">',d+='<div class="col-md-2 col-xs-2 avatar">',d+='<img src="'+_cs.AdminAvatar+'" class=" img-responsive ">',d+="</div>",d+='<div class="col-md-10 col-xs-10">',d+='<div class="messages msg_receive">',d+="<p>"+c.text+"</p>",d+='<time datetime="2009-11-13T20:00">'+c.timer+"</time>",d+="</div>",d+="</div>",d+="</div>"),a(".msg_container_base").append(d),a(".msg_container_base").animate({scrollTop:a(".msg_container_base").prop("scrollHeight")},"fast")},_cs.currentTimer=function(){var a=new Date;return(1==a.getHours().toString().length?"0"+a.getHours():a.getHours())+":"+(1==a.getMinutes().toString().length?"0"+a.getMinutes():a.getMinutes())+":"+(1==a.getSeconds().toString().length?"0"+a.getSeconds():a.getSeconds())}})},document.getElementsByTagName("head")[0].appendChild(a)}();